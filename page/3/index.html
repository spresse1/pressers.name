<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.96.0"><title>The Electronic Press - The Electronic Press</title><meta charset=utf-8><meta http-equiv=cache-control content="public"><meta name=robots content="follow, all"><meta name=language content="en"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=keywords content><link rel=alternate type=application/rss+xml title="RSS Feed for pressers.name" href=/index.xml><link rel=stylesheet type=text/css media="screen, projection" href=/static/css/base.css><link rel=stylesheet type=text/css media="screen, projection" href=/static/css/cssmenu.css><link rel=stylesheet type=text/css media="screen, projection" href=/static/css/menustyling.css><link rel=stylesheet type=text/css media="screen, projection" href=/static/css/blog.css><link rel=stylesheet type=text/css media=print href=/static/css/print.css></head><body><div id=skip><a href=#content>Skip to Main Content</a></div><div id=leftbar></div><div id=contentwrapper><div id=header><div id=titleimagediv></div><div id=twotraces><div id=twotracesright>&nbsp;</div></div></div><div class=menu id=topmenu><nav><ul class=top-navigation><li><a href=/ title=Home rel=home>Home</a></li><li><a href=http://github.com/spresse1>GitHub</a></li><li><a href=/contact>Contact</a></li></ul></nav></div><div id=onetrace><div id=onetraceleft></div><div id=breadcrumbs class=breadcrumbs><nav><ul class=breadcrumbs><li><a href=/>Home</a></li></ul></nav></div></div><div id=bodywrapper><div id=content><div id=contentborder></div><div id=innercontent><main><div class=pagination-container><nav><ul class=paginator><li class=page-item><a href=/ aria-label="First page" class=page-link role=button>&#171;</a></li><li class=page-item><a href=/page/2/ aria-label="Previous page" class=page-link role=button>&lt;</a></li><li class=page-item><a href=/ aria-label="Page 1" class=page-link role=button>1</a></li><li class=page-item><a href=/page/2/ aria-label="Page 2" class=page-link role=button>2</a></li><li class="page-item page-link-current"><a href=/page/3/ aria-label="Page 3" class=page-link id=page-link-current role=button>3</a></li><li class=page-item><a href=/page/4/ aria-label="Page 4" class=page-link role=button>4</a></li><li class=page-item><a href=/page/5/ aria-label="Page 5" class=page-link role=button>5</a></li><li class=page-item><a href=/page/4/ aria-label="Next page" class=page-link role=button>></a></li><li class=page-item><a href=/page/5/ aria-label="Last page" class=page-link role=button>&#187;</a></li></ul></nav></div><div class=hentry><article itemtype=http://schema.org/Article itemscope id=blog/acm-cluster/building-myricom-fiber-rpms.md><header class=entry-header><h1 class=entry-title><a href=/2012/12/16/building-myricom-fiber-rpms/>Building the ACM Cluster, Part 11d: Building Myricom fiber RPMs</a></h1><p class=entry-info>Published on <time>Sun, Dec 16, 2012</time>
in ACM, ACM Cluster</p></header><div class=entry-body><p>Welcome back to my ongoing series on building the JHUACM VM cluster.  In this part, I&rsquo;m going to be focusing on building the RPM driver for the Myricom fiber cards that were given to us with the cluster.  Unfortunately the drivers for this are closed source.  However, through my connections to physics, I was able to get source code to build from.  In short, if you&rsquo;re here looking for drivers, you&rsquo;re out of luck - go talk to Myricom.</p><p>The specific hardware we have is driven by the mx2g driver, so that is what I&rsquo;ll be working on.</p><h1 id=down-the-rabbit-hole>Down the Rabbit Hole</h1><p>The first thing I did when I got the tarball of the driver source was try to build the rpm.  The normal RPM build process is to copy the source tarball and a spec file into rpmbuild.  With these, it was some convoluted, undocumented and inflexible process.  In short, the process was to run &ldquo;make rpm&rdquo;, copy a magic folder somewhere magical, and then run rpmbuild against the spec file.  This also deliberately …</p></div><a href=/2012/12/16/building-myricom-fiber-rpms/>Continue reading</a></article></div><div class=hentry><article itemtype=http://schema.org/Article itemscope id=blog/acm-cluster/building-acm-cluster-part-11c-xen-rpms.md><header class=entry-header><h1 class=entry-title><a href=/2012/12/16/building-acm-cluster-part-11c-xen-rpms/>Building the ACM Cluster, Part 11c: Xen RPMs</a></h1><p class=entry-info>Published on <time>Sun, Dec 16, 2012</time>
in ACM, ACM Cluster</p></header><div class=entry-body><p>Next up,  lets build RPMs of <a href=http://xen.org/>Xen</a>, a hypervisor.  Xen was chosen because on machines which do not have virtualization bits (like the cluster I&rsquo;m building), Xen will do paravirtualization, which is still somewhat quick.Xen also has the concept of clustering and shifting VMs between instances - an important feature in a VM cluster!</p><h1 id=xen-spec-files>Xen Spec Files</h1><p>CentOS 6 no longer has support for Xen.  CentOS decided that they were going to put their weight behind QEMU/KVM as the virtulization solution and thus stopped distributing and supporting Xen.  There are a few third party sites out there hosting packages. But, frankly, I am sufficiently paranoid to want to build them myself.  I also could not find a freely available spec file.  So I <a href=https://github.com/spresse1/acm-vm-cluster/blob/master/xen/xen.spec>wrote my own for Xen</a>.  Hopefully the fact that I simply use the official Xen source and a spec file that is very simple and easy to examine will satisfy those who are as paranoid as I am.</p><h1 id=on-to-building-the-rpm>On to Building the RPM</h1><ol><li>Download <a href=https://raw.github.com/spresse1/acm-vm-cluster/master/xen/xen.spec>a copy of my spec file</a>.  As before put it …</li></ol></div><a href=/2012/12/16/building-acm-cluster-part-11c-xen-rpms/>Continue reading</a></article></div><div class=hentry><article itemtype=http://schema.org/Article itemscope id=blog/acm-cluster/building-acm-cluster-part-11b-kernel-rpm-build.md><header class=entry-header><h1 class=entry-title><a href=/2012/12/16/building-acm-cluster-part-11b-kernel-rpm-build/>Building the ACM Cluster, Part 11b: Kernel RPM Build</a></h1><p class=entry-info>Published on <time>Sun, Dec 16, 2012</time>
in ACM, ACM Cluster</p></header><div class=entry-body><p>If you haven&rsquo;t already done so, read and execute <a href=/2012/12/15/building-acm-cluster-part-11a-setting-rpmbuild-environment/>Building the ACM Cluster, Part 11a: Setting up rpmbuild environment</a>.</p><p>This article will be covering building a new kernel for CentOS and injecting it into xCat&rsquo;s local package repository.  I am covering this because later on we&rsquo;ll need to have a more recent kernel than CentOS comes with by default.  Xen specifically requires a later kernel.  However, when we build kernel modules, we&rsquo;ll want to be building against the same kernel version we&rsquo;re running.</p><h1 id=kernel-spec>Kernel Spec</h1><p>I&rsquo;ve built a kernel spec based on that at ElRepo (downloadable at <code>kernel/el6/SPECS/</code> from any of <a href=http://elrepo.org/tiki/Download>these mirrors</a>).  This builds a kernel package called kernel-ml.  This is so that it can coexist with the CentOS official kernel.  However, I have a different goal - I want to replace the kernel.  I&rsquo;ve therefore created my own <a href=https://github.com/spresse1/acm-vm-cluster/blob/master/kernel/kernel-3.6.spec>branch on my GitHub</a>.  The only difference between this and the official specfile is that I&rsquo;ve removed every …</p></div><a href=/2012/12/16/building-acm-cluster-part-11b-kernel-rpm-build/>Continue reading</a></article></div><div class=hentry><article itemtype=http://schema.org/Article itemscope id=blog/acm-cluster/building-acm-cluster-part-11a-setting-rpmbuild-environment.md><header class=entry-header><h1 class=entry-title><a href=/2012/12/15/building-acm-cluster-part-11a-setting-rpmbuild-environment/>Building the ACM Cluster, Part 11a: Setting up rpmbuild environment</a></h1><p class=entry-info>Published on <time>Sat, Dec 15, 2012</time>
in ACM, ACM Cluster</p></header><div class=entry-body><p>Up to this point, we haven&rsquo;t built any custom software for the cluster.  I&rsquo;ve tried very hard to use mostly off the shelf software.  However, this has to change.  Several of the major components we&rsquo;re going to use (xen, the fiber card driver, ceph) are not available in the CentOS repositories (or are too old).  So we&rsquo;re going to build them ourselves.</p><p>However, rather than build them on a node-by node basis (which would make a single install hours long&mldr;), we&rsquo;re going to build packages.  CentOS uses the rpm package format to distribute prebuilt software.  So we&rsquo;ll be building RPMs.</p><h1 id=where-do-i-build-rpms>Where do I build RPMs?</h1><p>Many resources recommend not building RPMs as root.  This is quite sensible if you&rsquo;re doing it on a machine that can&rsquo;t easily be rebuilt - that way you can&rsquo;t accidentally overwrite an important file.  However, since you </p><h1 id=installing-rpmbuild>Installing rpmbuild</h1><p>The primary tool used to build rpms is called, obviously enough rpmbuild.  We also need a …</p></div><a href=/2012/12/15/building-acm-cluster-part-11a-setting-rpmbuild-environment/>Continue reading</a></article></div><div class=hentry><article itemtype=http://schema.org/Article itemscope id=blog/acm-cluster/building-acm-vm-cluster-part-8-operating-system-image-build.md><header class=entry-header><h1 class=entry-title><a href=/2012/12/15/building-acm-vm-cluster-part-8-operating-system-image-build/>Building the ACM VM Cluster, Part 10: Operating system image build</a></h1><p class=entry-info>Published on <time>Sat, Dec 15, 2012</time>
in ACM, ACM Cluster</p></header><div class=entry-body><p>Now that we&rsquo;re done with network configuration.  Now, lets actually build an operating system to use on the nodes!</p><h1 id=lets-go-iso-huntin>Lets go ISO Huntin'!</h1><p>The first step in building operating system install images is to get the full operating system images.  Not netboot, but a fully installable version.  For CentOS the <a href="http://www.centos.org/modules/tinycontent/index.php?id=30">mirrors page</a> is a good place to start your hunt.  Personally, I downloaded both DVD images (CentOS-6.3-x86_64-bin-DVD1.iso and CentOS-6.3-x86_64-bin-DVD2.iso), though I suspect that simply the minimal image will cover it.</p><h1 id=import-install-media>Import Install Media</h1><p>Next, we have to import the install media to xCat&rsquo;s NFS filesystem.  To do this, we&rsquo;ll use the <code>copycds</code> command.  <code>copycds</code> takes as arguments simply the ISOs you want to import:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># copycds CentOS-6.3-x86_64-bin-DVD1.iso CentOS-6.3-x86_64-bin-DVD2.iso</span>
</span></span></code></pre></div><p>Sometimes copycds will tell you</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>Error: copycds could not identify the ISO supplied, you may wish to try -n &lt;osver&gt;
</span></span></code></pre></div><p>In which case your command will look more like</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># copycds -n …</span></span></span></code></pre></div></div><a href=/2012/12/15/building-acm-vm-cluster-part-8-operating-system-image-build/>Continue reading</a></article></div><div class=hentry><article itemtype=http://schema.org/Article itemscope id=blog/acm-cluster/building-acm-cluster-part-8-setting-masquerade-iptables.md><header class=entry-header><h1 class=entry-title><a href=/2012/12/15/building-acm-cluster-part-8-setting-masquerade-iptables/>Building the ACM Cluster, Part 9: Setting up masquerade with iptables</a></h1><p class=entry-info>Published on <time>Sat, Dec 15, 2012</time>
in ACM, ACM Cluster</p></header><div class=entry-body><p>Alright! Lets get this started again.  There is one last thing we need to do in order to have networking on the cluster functional.  Right now, the nodes inside the cluster can&rsquo;t speak to the outside world.  While we set up the head node to be able to speak to things on every interface, we haven&rsquo;t yet told it how to move traffic from one interface to another.</p><h1 id=making-the-gateway>Making the Gateway</h1><p>In normal clusters, there are three types of notes - workers, gateways and head nodes.  Workers do whatever task the cluster is intended for.  Head noes manage the workers.  And finally, gateways, which allow the worker nodes to communicate with things outside the cluster.</p><p>Gateways are needed because clusters often use IP addresses which are not publicly routeable.  The gateway allows the entire cluster to sit behind one IP address and is in charge of routing traffic properly.  This process is called <a href=http://en.wikipedia.org/wiki/Network_address_translation>Network Address Translation</a>.  In many ways, this makes the gateway like your home router.</p><p>Anyway, …</p></div><a href=/2012/12/15/building-acm-cluster-part-8-setting-masquerade-iptables/>Continue reading</a></article></div><div class=hentry><article itemtype=http://schema.org/Article itemscope id=blog/end-semester.md><header class=entry-header><h1 class=entry-title><a href=/2012/12/15/end-semester/>End of the semester!</a></h1><p class=entry-info>Published on <time>Sat, Dec 15, 2012</time></p></header><div class=entry-body><p>Hey world!  I&rsquo;ve been inactive here the last month and a half because my semester got intense and I, frankly, didn&rsquo;t have time.  In this time, I&rsquo;ve kept working on all my projects, job hunted and got hired.  Phew.  Busy time.</p><p>In any case, this is a &ldquo;hello! still alive!&rdquo; and a warning that you&rsquo;re probably going to see me post quite a bit here over the next few days as I catch up on my backlog of documenting things.</p></div><a href=/2012/12/15/end-semester/>Continue reading</a></article></div><div class=hentry><article itemtype=http://schema.org/Article itemscope id=blog/acm/acm-talk-version-control.md><header class=entry-header><h1 class=entry-title><a href=/2012/10/26/acm-talk-version-control/>ACM Talk: Version Control</a></h1><p class=entry-info>Published on <time>Fri, Oct 26, 2012</time>
in ACM, Presentations</p></header><div class=entry-body><p>I gave a talk to JHUACM this evening about version control.  Pretty basic stuff.  Anyway, I thought I&rsquo;d put a clearer link to my slides online in case it was useful for anyone.</p><p><a href=/static/slidesets/ACMVCS-Oct12.pdf>Slides, PDF foramt</a></p><p><a href=/static/slidesets/ACMVCS-Oct12.odp>Slides, ODP format</a></p></div><a href=/2012/10/26/acm-talk-version-control/>Continue reading</a></article></div><div class=hentry><article itemtype=http://schema.org/Article itemscope id=blog/endeavor-time-lapse.md><header class=entry-header><h1 class=entry-title><a href=/2012/10/21/endeavor-time-lapse/>Endeavor Time Lapse</a></h1><p class=entry-info>Published on <time>Sun, Oct 21, 2012</time>
in Links</p></header><div class=entry-body><p>Hey everyone!  It&rsquo;s been a bit of a lazy weekend - I&rsquo;ve mostly been doing schoolwork.  I had some success with JHUACM cluster stuff that I haven&rsquo;t written up yet (its fun!  I rewrote the spec file for building RPMs of a proprietary driver!).  However, I&rsquo;ve come across a cool video to share.</p><h1 id=time-lapse-endeavors-trip-through-la>Time Lapse: Endeavor&rsquo;s Trip Through LA</h1><p>In case you missed it, the space shuttle Endeavor recently moved off to it&rsquo;s new home in the California Science Center.  <a href=http://framework.latimes.com/2012/10/15/time-lapse-video-space-shuttle-endeavours-trek-across-l-a/>The LA Times&rsquo; Brian Chan put together a time-lapse video of the move</a>.  For your convenience, its embedded below:</p><p>What struck me most about this video is the meticulous amount of planning that must have gone into this move.  Everything from the devices the shuttle is resting on to having precisely measured the streets and the trees and making sure that there would be space.  Throughout this time lapse the shuttle&rsquo;s movements look choreographed, perfectly planned for this route.  They even managed …</p></div><a href=/2012/10/21/endeavor-time-lapse/>Continue reading</a></article></div><div class=hentry><article itemtype=http://schema.org/Article itemscope id=blog/acm-cluster/adventures-routing-source-based-multi-homed-routing.md><header class=entry-header><h1 class=entry-title><a href=/2012/10/17/adventures-routing-source-based-multi-homed-routing/>Building the ACM Cluster, Part 8: Adventures in Routing: Source Based (Multi-homed) Routing</a></h1><p class=entry-info>Published on <time>Wed, Oct 17, 2012</time>
in ACM, ACM Cluster</p></header><div class=entry-body><p>(This post is related to the ACM cluster build.  However, it is really generic systems stuff and not terribly related to the actual cluster build.  It is much more closely related to quirks of JHU networking.)</p><h1 id=the-problem>The Problem</h1><p>JHU has two distinct networks - firewalled and firewall-free.  (In truth there are more and there are gradations, but these are the two JHUACM has IP allocations on.)  Some services cannot be run form inside the firewalled network.  For these the ACM has a small firewall-free allocation.  Because the cluster will be hosting VMs inside both networks, it needs to be capable of routing traffic from both.  This means doing something called source-based routing or multihomed routing.  This refers to the fact that this machine will have two connections to the internet.  Typically, this is a very rare setup - Multihoming is usually used at the ISP or datacenter level, rather than at the level of the individual box.</p><h1 id=the-solution>The Solution</h1><p>The solution is to convert linux to …</p></div><a href=/2012/10/17/adventures-routing-source-based-multi-homed-routing/>Continue reading</a></article></div><div class=pagination-container><nav><ul class=paginator><li class=page-item><a href=/ aria-label="First page" class=page-link role=button>&#171;</a></li><li class=page-item><a href=/page/2/ aria-label="Previous page" class=page-link role=button>&lt;</a></li><li class=page-item><a href=/ aria-label="Page 1" class=page-link role=button>1</a></li><li class=page-item><a href=/page/2/ aria-label="Page 2" class=page-link role=button>2</a></li><li class="page-item page-link-current"><a href=/page/3/ aria-label="Page 3" class=page-link id=page-link-current role=button>3</a></li><li class=page-item><a href=/page/4/ aria-label="Page 4" class=page-link role=button>4</a></li><li class=page-item><a href=/page/5/ aria-label="Page 5" class=page-link role=button>5</a></li><li class=page-item><a href=/page/4/ aria-label="Next page" class=page-link role=button>></a></li><li class=page-item><a href=/page/5/ aria-label="Last page" class=page-link role=button>&#187;</a></li></ul></nav></div></main></div></div><div id=sidebar><div class=widget><nav><h1>Recent Posts</h1><ul class=entries-reent><li><a href=/2022/04/03/website-hosting-changed/>Website hosting changed</a></li><li><a href=/2022/02/01/enigma-2022/>Enigma 2022</a></li><li><a href=/2021/11/21/getting-new-lenses-lensfun-notes/>Getting new lenses for Lensfun</a></li><li><a href=/2021/10/04/living-germany-converting-drivers-license/>Living in Germany: Converting a Driver's License</a></li><li><a href=/2021/02/08/im-moving-germany/>I'm moving to Germany!</a></li></ul></nav></div><div class=sidebarbender></div><div class=widget><nav><h1>Social Media</h1><ul class=socialmedia><li><a href=https://twitter.com/spresser>Twitter</a></li><li><a href=https://www.linkedin.com/in/steven-presser/>LinkedIn</a></li></ul></nav></div><div class=sidebarbender></div><div class=widget><nav><h1>Categories</h1><ul class=categories><li><a href=/categories/3d-printing/>3D Printing</a></li><li><a href=/categories/acm/>ACM</a></li><li><a href=/categories/acm-cluster/>ACM Cluster</a></li><li><a href=/categories/cyberlaw/>Cyberlaw</a></li><li><a href=/categories/cybersecurity/>Cybersecurity</a></li><li><a href=/categories/germany/>Germany</a></li><li><a href=/categories/infrastructure/>Infrastructure</a></li><li><a href=/categories/life-in-germany/>Life in Germany</a></li><li><a href=/categories/links/>Links</a></li><li><a href=/categories/presentations/>Presentations</a></li><li><a href=/categories/projects/>Projects</a></li><li><a href=/categories/shrubbery/>Shrubbery</a></li></ul></nav></div><div class=sidebarbender></div></div></div><div id=onetracebottom><footer><a href=https://github.com/spresse1/pressers.name>Website source</a><br>Site design by Kyle M.</footer></div></div></body></html>