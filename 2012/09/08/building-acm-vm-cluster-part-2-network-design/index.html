<!doctype html><html lang=en><head><title>Building the ACM VM Cluster, Part 2: Network design - The Electronic Press</title><meta charset=utf-8><meta http-equiv=cache-control content="public"><meta name=robots content="follow, all"><meta name=language content="en"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Welcome to part 2 of my series of posts on building the ACM VM cluster! Part 1 covered the hardware and software that will be used in the cluster. Part 2 is going to focus on network design.
Introduction Typically in clusters there are two networks (usually represented by IP ranges, though sometimes actually physically separate): management and work. Management is typically mostly for master node to worker node communication (giving and getting work orders), whereas work is for intercommunication between nodes."><meta name=keywords content><link rel=alternate type=application/rss+xml title="RSS Feed for pressers.name" href=/index.xml><link rel=stylesheet type=text/css media="screen, projection" href=/static/css/base.css><link rel=stylesheet type=text/css media="screen, projection" href=/static/css/cssmenu.css><link rel=stylesheet type=text/css media="screen, projection" href=/static/css/menustyling.css><link rel=stylesheet type=text/css media="screen, projection" href=/static/css/blog.css><link rel=stylesheet type=text/css media=print href=/static/css/print.css></head><body><div id=skip><a href=#content>Skip to Main Content</a></div><div id=leftbar></div><div id=contentwrapper><div id=header><div id=titleimagediv></div><div id=twotraces><div id=twotracesright>&nbsp;</div></div></div><div class=menu id=topmenu><nav><ul class=top-navigation><li><a href=/ title=Home rel=home>Home</a></li><li><a href=http://github.com/spresse1>GitHub</a></li><li><a href=/contact>Contact</a></li></ul></nav></div><div id=onetrace><div id=onetraceleft></div><div id=breadcrumbs class=breadcrumbs><nav><ul class=breadcrumbs><li><a href=/>Home</a></li><li><a href=/blog/>Blogs</a></li><li><a href=/2012/09/08/building-acm-vm-cluster-part-2-network-design/>Building the ACM VM Cluster, Part 2: Network design</a></li></ul></nav></div></div><div id=bodywrapper><div id=content><div id=contentborder></div><div id=innercontent><main><div class=hentry><article itemtype=http://schema.org/Article itemscope id=blog/acm-cluster/building-acm-vm-cluster-part-2-network-design.md><header class=entry-header><h1 class=entry-title><a href=/2012/09/08/building-acm-vm-cluster-part-2-network-design/>Building the ACM VM Cluster, Part 2: Network design</a></h1><p class=entry-info>Published on <time>Sat, Sep 8, 2012</time>
in ACM, ACM Cluster</p></header><div class=entry-body><p>Welcome to part 2 of my series of posts on building the ACM VM cluster!  <a href=/2012/09/08/building-acm-vm-cluster-part-1/>Part 1</a> covered the hardware and software that will be used in the cluster.  Part 2 is going to focus on network design.</p><h1 id=introduction>Introduction</h1><p>Typically in clusters there are two networks (usually represented by IP ranges, though sometimes actually physically separate): management and work.  Management is typically mostly for master node to worker node communication (giving and getting work orders), whereas work is for intercommunication between nodes.  However, in our case, we are going to need three separate networks: management, work and fiber.  Why?  Well, we have fiber cards in the nodes, which go faster then the ethernet cards that are in the nodes, and I&rsquo;d like to take advantage of that.</p><h1 id=physical-networks>Physical Networks</h1><p>As is probably obvious, we&rsquo;ll be using two distinctly different physical networks - the fiber network and the ethernet network.  Both the management and the work network will run over ethernet, while the fiber is going to be dedicated to the cluster file system.  Most simply, this is because the filesystem will produce the most traffic and gets the most advantage from having a speedy network.</p><h1 id=ip-layer-networks>IP-Layer Networks</h1><p>So now we need to think about what IP address space to use in this cluster and how to divide it up.  When I know I&rsquo;m in a situation like this one, where my private network is going to be more-or-less isolated from the rest of the world, I like to go with the largest address space possible to reduce the changes I need to migrate later.  In this case, I can&rsquo;t use the 10.0.0.0/8 network, since JHU uses this internally on their networks.  This would unfortunately cause routing conflicts, which I&rsquo;d rather not do.  One possible solution would be a double-NAT, but this seems like too much complexity when a smaller space will do just fine.  Therefore, I&rsquo;m choosing to use 172.16.0.0/12 as the private IP address space within this cluster.  Since many of the VMs will run globally-addressable services, they&rsquo;ll have globally addressable IP addresses.  However, the cluster (other than the gateway nodes) won&rsquo;t care about this.  I also prefer to err on the side of over-assigning the IP ranges here, so these are fairly large ranges:</p><ul><li>Management: 172.16.0.0/15 (172.16.0.0-172.17.255.255)</li><li>Node Network: 172.18.0.0/15 (172.18.0.0-172.19.255.255)</li><li>Fiber Network: 172.20.0.0/15 (172.20.0.0-172.21.255.255)</li></ul><p>XCat will also want a range for DHCP addresses.  So I&rsquo;ve picked the next range as the DHCP network:</p><ul><li>DHCP: 172.22.0.0/15 (172.22.0.0-172.23.255.255)</li></ul><p>And finally, the rest of this space can be given to any VMs that do not need globally addressable IP addresses.</p><h1 id=conclusion>Conclusion</h1><p>Though fairly complex, this IP address space setup takes into account all of the various typical divisions in a cluster network, as well as all of the physical and software requirements.  I therefore think this is going to be a sufficient division.</p></div></article></div></main></div></div><div id=sidebar><div class=widget><nav><h1>Recent Posts</h1><ul class=entries-reent><li><a href=/2022/04/03/website-hosting-changed/>Website hosting changed</a></li><li><a href=/2022/02/01/enigma-2022/>Enigma 2022</a></li><li><a href=/2021/11/21/getting-new-lenses-lensfun-notes/>Getting new lenses for Lensfun</a></li><li><a href=/2021/10/04/living-germany-converting-drivers-license/>Living in Germany: Converting a Driver's License</a></li><li><a href=/2021/02/08/im-moving-germany/>I'm moving to Germany!</a></li></ul></nav></div><div class=sidebarbender></div><div class=widget><nav><h1>Social Media</h1><ul class=socialmedia><li><a href=https://twitter.com/spresser>Twitter</a></li><li><a href=https://www.linkedin.com/in/steven-presser/>LinkedIn</a></li></ul></nav></div><div class=sidebarbender></div><div class=widget><nav><h1>Categories</h1><ul class=categories><li><a href=/categories/3d-printing/>3D Printing</a></li><li><a href=/categories/acm/>ACM</a></li><li><a href=/categories/acm-cluster/>ACM Cluster</a></li><li><a href=/categories/cyberlaw/>Cyberlaw</a></li><li><a href=/categories/cybersecurity/>Cybersecurity</a></li><li><a href=/categories/germany/>Germany</a></li><li><a href=/categories/infrastructure/>Infrastructure</a></li><li><a href=/categories/life-in-germany/>Life in Germany</a></li><li><a href=/categories/links/>Links</a></li><li><a href=/categories/presentations/>Presentations</a></li><li><a href=/categories/projects/>Projects</a></li><li><a href=/categories/shrubbery/>Shrubbery</a></li></ul></nav></div><div class=sidebarbender></div></div></div><div id=onetracebottom><footer><a href=https://github.com/spresse1/pressers.name>Website source</a><br>Site design by Kyle M.</footer></div></div></body></html>