<!doctype html><html lang=en><head><title>Building the ACM VM Cluster, Part 1: Hardware - The Electronic Press</title><meta charset=utf-8><meta http-equiv=cache-control content="public"><meta name=robots content="follow, all"><meta name=language content="en"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="So I have a vision for the ACM systems - I&rsquo;d like to make it so we are as redundant as possible and we can do updates to systems without having to take them offline. The obvious answer to this is using VMs, in a cluster. Fortunately, the ACM recently received a donation of the old DLMS cluster from physics (as well as three more recent Dell servers from JHU Housing and Dining)."><meta name=keywords content><link rel=alternate type=application/rss+xml title="RSS Feed for pressers.name" href=/index.xml><link rel=stylesheet type=text/css media="screen, projection" href=/static/css/base.css><link rel=stylesheet type=text/css media="screen, projection" href=/static/css/cssmenu.css><link rel=stylesheet type=text/css media="screen, projection" href=/static/css/menustyling.css><link rel=stylesheet type=text/css media="screen, projection" href=/static/css/blog.css><link rel=stylesheet type=text/css media=print href=/static/css/print.css></head><body><div id=skip><a href=#content>Skip to Main Content</a></div><div id=leftbar></div><div id=contentwrapper><div id=header><div id=titleimagediv></div><div id=twotraces><div id=twotracesright>&nbsp;</div></div></div><div class=menu id=topmenu><nav><ul class=top-navigation><li><a href=/ title=Home rel=home>Home</a></li><li><a href=http://github.com/spresse1>GitHub</a></li><li><a href=/contact>Contact</a></li></ul></nav></div><div id=onetrace><div id=onetraceleft></div><div id=breadcrumbs class=breadcrumbs><nav><ul class=breadcrumbs><li><a href=/>Home</a></li><li><a href=/blog/>Blogs</a></li><li><a href=/2012/09/08/building-acm-vm-cluster-part-1/>Building the ACM VM Cluster, Part 1: Hardware</a></li></ul></nav></div></div><div id=bodywrapper><div id=content><div id=contentborder></div><div id=innercontent><main><div class=hentry><article itemtype=http://schema.org/Article itemscope id=blog/acm-cluster/building-acm-vm-cluster-part-1.md><header class=entry-header><h1 class=entry-title><a href=/2012/09/08/building-acm-vm-cluster-part-1/>Building the ACM VM Cluster, Part 1: Hardware</a></h1><p class=entry-info>Published on <time>Sat, Sep 8, 2012</time>
in ACM, ACM Cluster</p></header><div class=entry-body><p>So I have a vision for the ACM systems - I&rsquo;d like to make it so we are as redundant as possible and we can do updates to systems without having to take them offline.  The obvious answer to this is using VMs, in a cluster.  Fortunately, the ACM recently received a donation of the old <a href="http://center.ncet2.org/index.php?option=com_patents&controller=awards&tmpl=component&view=awards&layout=award&frame=awards&user=10274&id=86559_nsf">DLMS</a> cluster from physics (as well as three more recent Dell servers from JHU Housing and Dining).  This is the perfect opportunity for me!  So off we go, down the rabbit hole (again).</p><p>This post is going to focus on cluster design - first, a description of the hardware (since we didn&rsquo;t get to choose it, I wont be covering why this hardware), then a description of the software architecture and the whys of each software choice.</p><h1 id=hardware> Hardware</h1><h2 id=head-node-dell-poweredge-2950>Head Node (Dell PowerEdge 2950)</h2><p>4x Intel Xeon 5160 @ 3Ghz</p><p>4GB RAM</p><p>3x300GB SAS drives in hardware RAID5, approximately 600GB usable.</p><h2 id=cluster-nodes>Cluster Nodes</h2><p>2x AMD Opteron 244 @1.8GHz (Note: these have no hardware virtualization built in!)</p><p>RAM Varies, at least 2GB</p><p>40 GB IDE HDD</p><p>Myricom 2ME Fiber card (Note: this will restrict operating system choice - I am only able to get drivers for these on CentOS.  Maybe Debian, if I&rsquo;m lucky).</p><h1 id=software>Software</h1><h2 id=cluster-management---xcat-2>Cluster Management - XCat 2</h2><p>On the recommendation of the former DLMS systems administrator, I am using <a href=http://xcat.sourceforge.net/>XCat</a> to manage the cluster.  XCat provides a very powerful way to manage nodes.  When fully set up, it is possible to simply plug a new node in, power it on, and have to kickstart to the proper operating system.  In some configurations, XCat is even capable of remotely powercycling nodes.  I don&rsquo;t yet know if we&rsquo;ll be able to do this in our configuration, but I hope so.</p><p>XCat also has some very powerful image creation tools, which I plan to take full advantage of.</p><p>XCat uses yum-based package management, which then ties us into a yum-based operating system.  But, since the fiber cards (as mentioned above) require us to use CentOS, this isn&rsquo;t a problem.</p><h2 id=gateway-node-redundancy---keepalived>Gateway Node Redundancy - Keepalived</h2><p>One of the critical goals of this cluster is to get as close as possible to 100% uptime.  Obviously this isn&rsquo;t possible if every time the gateway node (which serves much like your home router - it aggregates outbound traffic) is rebooted the entire cluster loses connectivity.  So what I need is two gateway nodes, set up so that if one goes offline, the other can immediately pick up all incoming and outgoing traffic.  The simplest solution to this is to use the <a href=http://en.wikipedia.org/wiki/Virtual_Router_Redundancy_Protocol>Virtual Router Redundancy Protocol</a> to to failover.  Keepalived is a well-established package for doing this and makes it quite simple.  It is also extensible to doing failover and load balancing in services, which may come in handy later.</p><h2 id=virtualization---xen>Virtualization - Xen</h2><p>This is mostly for tradition - the ACM already uses Xen on Luna (which I&rsquo;ve <a href=/2012/09/08/luna-case-study-failure/>written about before</a>) and I&rsquo;d like to keep using it.  Primarily because I have no complaints, but also for ease of transition.</p><h2 id=clustered-file-system--->Clustered File System - ???</h2><p>I&rsquo;m going to be dedicating as much space as I can to a clustered, redundant filesystem for VM storage.  But I honestly dont know what I&rsquo;ll use (because I haven&rsquo;t done the research yet).  Some possibilities:</p><ul><li>GFS</li><li>GlusterFS</li><li>AFS?</li></ul><h2 id=vm-management---ganeti>VM Management - Ganeti</h2><p><a href=http://code.google.com/p/ganeti/>Ganeti</a> is a piece of VM management software that ties in well to Xen and should make it quite simple to toss VMs (even while running!) between nodes.  This will be extraordinarily useful when upgrading the operating systems on the nodes.</p><h1 id=conclusion>Conclusion</h1><p>So there you have it!  The physical and the software to be used in the ACM VM cluster.  Coming up in part 2: network design.</p></div></article></div></main></div></div><div id=sidebar><div class=widget><nav><h1>Recent Posts</h1><ul class=entries-reent><li><a href=https://pressers.name/2022/02/01/enigma-2022/>Enigma 2022</a></li><li><a href=https://pressers.name/2021/11/21/getting-new-lenses-lensfun-notes/>Getting new lenses for Lensfun</a></li><li><a href=https://pressers.name/2021/10/04/living-germany-converting-drivers-license/>Living in Germany: Converting a Driver's License</a></li><li><a href=https://pressers.name/2021/02/08/im-moving-germany/>I'm moving to Germany!</a></li><li><a href=https://pressers.name/2021/01/23/i-finally-finished-kings-quest-6/>I Finally Finished King's Quest 6!</a></li></ul></nav></div><div class=sidebarbender></div><div class=widget><nav><h1>Social Media</h1><ul class=socialmedia><li><a href=https://twitter.com/spresser>Twitter</a></li><li><a href=https://www.linkedin.com/in/steven-presser/>LinkedIn</a></li></ul></nav></div><div class=sidebarbender></div><div class=widget><nav><h1>Categories</h1><ul class=categories><li><a href=https://pressers.name/categories/3d-printing/>3D Printing</a></li><li><a href=https://pressers.name/categories/acm/>ACM</a></li><li><a href=https://pressers.name/categories/acm-cluster/>ACM Cluster</a></li><li><a href=https://pressers.name/categories/cyberlaw/>Cyberlaw</a></li><li><a href=https://pressers.name/categories/cybersecurity/>Cybersecurity</a></li><li><a href=https://pressers.name/categories/germany/>Germany</a></li><li><a href=https://pressers.name/categories/infrastructure/>Infrastructure</a></li><li><a href=https://pressers.name/categories/life-in-germany/>Life in Germany</a></li><li><a href=https://pressers.name/categories/links/>Links</a></li><li><a href=https://pressers.name/categories/presentations/>Presentations</a></li><li><a href=https://pressers.name/categories/projects/>Projects</a></li><li><a href=https://pressers.name/categories/shrubbery/>Shrubbery</a></li></ul></nav></div><div class=sidebarbender></div></div></div><div id=onetracebottom><footer><a href=https://github.com/spresse1/pressers.name>Website source</a><br>Site design by Kyle M.</footer></div></div></body></html>