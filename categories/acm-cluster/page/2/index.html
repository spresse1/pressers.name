<!doctype html><html lang=en><head><title>ACM Cluster - The Electronic Press</title><meta charset=utf-8><meta http-equiv=cache-control content="public"><meta name=robots content="follow, all"><meta name=language content="en"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=keywords content><link rel=alternate type=application/rss+xml title="RSS Feed for pressers.name" href=/index.xml><link rel=stylesheet type=text/css media="screen, projection" href=/static/css/base.css><link rel=stylesheet type=text/css media="screen, projection" href=/static/css/cssmenu.css><link rel=stylesheet type=text/css media="screen, projection" href=/static/css/menustyling.css><link rel=stylesheet type=text/css media="screen, projection" href=/static/css/blog.css><link rel=stylesheet type=text/css media=print href=/static/css/print.css></head><body><div id=skip><a href=#content>Skip to Main Content</a></div><div id=leftbar></div><div id=contentwrapper><div id=header><div id=titleimagediv></div><div id=twotraces><div id=twotracesright>&nbsp;</div></div></div><div class=menu id=topmenu><nav><ul class=top-navigation><li><a href=/ title=Home rel=home>Home</a></li><li><a href=http://github.com/spresse1>GitHub</a></li><li><a href=/contact>Contact</a></li></ul></nav></div><div id=onetrace><div id=onetraceleft></div><div id=breadcrumbs class=breadcrumbs><nav><ul class=breadcrumbs><li><a href=/>Home</a></li><li><a href=/categories/>Categories</a></li><li><a href=/categories/acm-cluster/>ACM Cluster</a></li></ul></nav></div></div><div id=bodywrapper><div id=content><div id=contentborder></div><div id=innercontent><main><div class=pagination-container><nav><ul class=paginator><li class=page-item><a href=/categories/acm-cluster/ aria-label="First page" class=page-link role=button>&#171;</a></li><li class=page-item><a href=/categories/acm-cluster/ aria-label="Previous page" class=page-link role=button>&lt;</a></li><li class=page-item><a href=/categories/acm-cluster/ aria-label="Page 1" class=page-link role=button>1</a></li><li class="page-item page-link-current"><a href=/categories/acm-cluster/page/2/ aria-label="Page 2" class=page-link id=page-link-current role=button>2</a></li></ul></nav></div><div class=hentry><article itemtype=http://schema.org/Article itemscope id=blog/acm-cluster/building-acm-cluster-part-7-network-redux.md><header class=entry-header><h1 class=entry-title><a href=/2012/10/11/building-acm-cluster-part-7-network-redux/>Building the ACM Cluster, Part 7: Network redux</a></h1><p class=entry-info>Published on <time>Thu, Oct 11, 2012</time>
in ACM, ACM Cluster</p></header><div class=entry-body><p>So I&rsquo;ve mentioned that I&rsquo;ve been fighting networking again in the ACM cluster.  I&rsquo;ve been reworking the network.  This whole adventure began after a conversation with the very knowledgeable <a href=https://www.ietfng.org/nwf/>nwf</a>, who pointed out that JHU runs two different networks that the ACM systems need access to - CSNet (the JHU Computer Science department&rsquo;s network) and JHU firewall-free (which has unfiltered access to the internet).  The goal of this rework was to allow the cluster to be on both.  In a situation with more resources, I would have simply bought another network card for each of the gateway nodes.  However, I don&rsquo;t have those resources and couldn&rsquo;t find any spare network cards.  nwf then pointed out that I would be able to use 802.1Q vlans to make more virtual ports.</p><p>So, here&rsquo;s how this works:  CSNet and JHU firewall-free (JHUFF) each plug into a single port on the main switches.  These ports are assigned as being on specific vlans that differ from the other …</p></div><a href=/2012/10/11/building-acm-cluster-part-7-network-redux/>Continue reading</a></article></div><div class=hentry><article itemtype=http://schema.org/Article itemscope id=blog/acm-cluster/configuring-cisco-2900xl-switches-tftp-and-alongside-xcat.md><header class=entry-header><h1 class=entry-title><a href=/2012/09/11/configuring-cisco-2900xl-switches-tftp-and-alongside-xcat/>Configuring Cisco 2900XL Switches via TFTP (and alongside xCat)</a></h1><p class=entry-info>Published on <time>Tue, Sep 11, 2012</time>
in ACM, ACM Cluster</p></header><div class=entry-body><p>As part of my ACM cluster creation obsession, I wanted to make the Cisco 2900XL switches we have autoconfigure.  I&rsquo;m not terribly familiar with how these switches operate and, rather than reconfigure all of them at once, I&rsquo;d much rather be able to reboot (reload, in cisco parlence) them and have them come up with my new, clean config.</p><p>Fortunately for me, Cisco thought of a situation like this when building the software for these switches.  According to <a href=http://www.cisco.com/en/US/docs/switches/lan/catalyst2900xl_3500xl/release12.0_5_wc5/swg/swsyst.html#wp1028392>this page from their instruction manual</a>, if a switch boots and doesn&rsquo;t have an in-flash configuration file, it will DHCP/BOOTP for a network address, then attempt to TFTP one of several files - network-confg, cisconet.cfg, router-confg or ciscortr.cfg.</p><p>In my case, I&rsquo;m running this next to xCat, so I already have a TFTP and DHCP servers running.  Furthermore, my switch was already set up in xCat to get a static address.  So all I really needed to do was put in the configuration file.  But how to generate …</p></div><a href=/2012/09/11/configuring-cisco-2900xl-switches-tftp-and-alongside-xcat/>Continue reading</a></article></div><div class=hentry><article itemtype=http://schema.org/Article itemscope id=blog/acm-cluster/building-acm-cluster-part-6-network-configuration.md><header class=entry-header><h1 class=entry-title><a href=/2012/09/09/building-acm-cluster-part-6-network-configuration/>Building the ACM Cluster, Part 6: Network Configuration</a></h1><p class=entry-info>Published on <time>Sun, Sep 9, 2012</time>
in ACM, ACM Cluster</p></header><div class=entry-body><p>In <a href=/2012/09/09/building-acm-vm-cluster-part-5-xcat-configuration/>part 5</a> of this series, I covered the generic xCat setup and we told it how the network was set up.  We&rsquo;ve done little bits of network setup before (like setting our switches up for SNMP read access in the public community).  Now we&rsquo;re going to do quite a bit more.</p><h1 id=telling-xcat-where-nodes-are>Telling xCat where Nodes Are</h1><p>xCat has this wonderful ability to know what a newly plugged in machine is, based on where it is on a switch.  In my case, I have the first management node on eth-switch1&rsquo;s 1st port, second management on the second port.  I then have the fiber switch&rsquo;s management interface on the 3rd port, and nodes are ports 4-20.  The following set of commands encapsulates this, though you&rsquo;ll note that I&rsquo;ve intentionally not made any entries for the management nodes - no point in confusing xCat by doing so.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># nodech myricom-switch switch.switch=eth-switch1 switch.port=3</span>
</span></span><span style=display:flex><span><span style=color:#75715e># nodech compute switch.switch=eth-switch1 switch.port=&#39;|\D+(\d+)$|($1+3)|&#39;</span>
</span></span></code></pre></div><p>Notice that …</p></div><a href=/2012/09/09/building-acm-cluster-part-6-network-configuration/>Continue reading</a></article></div><div class=hentry><article itemtype=http://schema.org/Article itemscope id=blog/acm-cluster/building-acm-vm-cluster-part-5-xcat-configuration.md><header class=entry-header><h1 class=entry-title><a href=/2012/09/09/building-acm-vm-cluster-part-5-xcat-configuration/>Building the ACM VM Cluster, Part 5: xCat configuration</a></h1><p class=entry-info>Published on <time>Sun, Sep 9, 2012</time>
in ACM, ACM Cluster</p></header><div class=entry-body><p>In <a href=/2012/09/09/building-acm-vm-cluster-part-4-xcat-install/>part 4 of this series</a>, we installed xCat.  Now its time to configure it.</p><h1 id=but-first>But First&mldr;</h1><p>But first, lets talk a little about how you interact with xCat.  xCat stores its configuration files in &ldquo;tab"s - tables.  In the default case, these are sqlite tables, though some will try to convince you to change it to MySQL.  Unless you&rsquo;re running thousands of nodes or continually hitting xCat, I see no point in this changeover and therefore will not cover it.</p><p>Interaction with xCat happens primarily through three commands: <code>chnode</code>, <code>chtab</code> and <code>tabedit</code>.  However, <code>nodels</code> and <code>tabdump</code> are also useful for seeing what xCat got out of your input.  For detail on these commands, read the man pages for each.  However, here is a quick summary:</p><ul><li><code>chnode</code>: change configuration details on a node</li><li><code>chtab</code>: Change configuration by key in a table</li><li><code>tabedi</code>t: Manually edit a table</li><li><code>nodels</code>: show all details associated with a particular node</li><li><code>tabdump</code>: show the data stored in a tab</li></ul><p>If you&rsquo;re looking …</p></div><a href=/2012/09/09/building-acm-vm-cluster-part-5-xcat-configuration/>Continue reading</a></article></div><div class=hentry><article itemtype=http://schema.org/Article itemscope id=blog/acm-cluster/building-acm-vm-cluster-part-4-xcat-install.md><header class=entry-header><h1 class=entry-title><a href=/2012/09/09/building-acm-vm-cluster-part-4-xcat-install/>Building the ACM VM Cluster, Part 4: xCat Install</a></h1><p class=entry-info>Published on <time>Sun, Sep 9, 2012</time>
in ACM, ACM Cluster</p></header><div class=entry-body><p>In <a href=/2012/09/08/building-acm-vm-cluster-part-3-keepalived/>part 3 of this series</a>, we got the management node set up to route traffic and generally properly configured.  Now its time to actually install xCat!</p><h1 id=choices>Choices</h1><p>Many xCat guides recommend downloading the RPMs and manually installing those.  The benefit of this route is that you need no network connection to your management node for this setup.  However, I prefer to have a simple upgrade path.  I also know my cluster will continuously be connected to the internet, so I don&rsquo;t need an offline configuration.  Therefore I&rsquo;m going to use the xCat repos to do the install.  For this case, refer to this <a href="http://sourceforge.net/apps/mediawiki/xcat/index.php?title=XCAT_iDataPlex_Cluster_Quick_Start#Option_2:_Prepare_to_Install_xCAT_Directly_from_the_Internet-hosted_Repository">piece of xCat documentation</a> if you need more detail.</p><h1 id=set-up-xcat-repos>Set up xCat repos</h1><p>First we need wget so we can grab files from the xCat website:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># yum install wget</span>
</span></span></code></pre></div><p>Now lets make sure we put the files in the right place:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># cd /etc/yum.repos.d</span>
</span></span></code></pre></div><p>List the directory and make sure you don&rsquo;t already have the xCat repos.  If you do, then skip the next step.  If you don&rsquo;t already have the xCat …</p></div><a href=/2012/09/09/building-acm-vm-cluster-part-4-xcat-install/>Continue reading</a></article></div><div class=hentry><article itemtype=http://schema.org/Article itemscope id=blog/acm-cluster/building-acm-vm-cluster-part-3-keepalived.md><header class=entry-header><h1 class=entry-title><a href=/2012/09/08/building-acm-vm-cluster-part-3-keepalived/>Building the ACM VM Cluster, Part 3: Mangement Node Setup - Keepalived</a></h1><p class=entry-info>Published on <time>Sat, Sep 8, 2012</time>
in ACM, ACM Cluster</p></header><div class=entry-body><p>In <a href=/2012/09/08/building-acm-vm-cluster-part-2-network-design/>part 2</a> of this series, I covered the network design - the last theoretical piece of design we need.  Now let&rsquo;s do some practical stuff!  In this section I&rsquo;m going to cover base network setup and keepalived installation on the management node.</p><h1 id=prerequisites>Prerequisites</h1><p>For this I&rsquo;ve assumed you already have a set up CentOS machine.  In my case, its CentOS 6.3 (64-bit) though this may of course vary, in which case, refer to the <a href="http://sourceforge.net/apps/mediawiki/xcat/index.php?title=XCAT_Documentation">XCat documentation</a> to see any differences.</p><h1 id=procedure>Procedure</h1><p>Before we dive into this, lets establish some conventions.  Commands, code, or something you&rsquo;ll see in a system file looks</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>Like this.
</span></span></code></pre></div><p>Commands will be prefixed with either $ (for commands you can run as a normal user) or # (for commands to be run as root or with sudo).  I use sane-editor to represent the text-editor of your choice (no flame wars here!)</p><h2 id=onwards-disable-selinux>Onwards! Disable SELinux</h2><p>First, lets disable SELinux (it might step on our toes.  Please feel free to reenable it later if you&rsquo;d like it)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># …</span></span></span></code></pre></div></div><a href=/2012/09/08/building-acm-vm-cluster-part-3-keepalived/>Continue reading</a></article></div><div class=hentry><article itemtype=http://schema.org/Article itemscope id=blog/acm-cluster/building-acm-vm-cluster-part-2-network-design.md><header class=entry-header><h1 class=entry-title><a href=/2012/09/08/building-acm-vm-cluster-part-2-network-design/>Building the ACM VM Cluster, Part 2: Network design</a></h1><p class=entry-info>Published on <time>Sat, Sep 8, 2012</time>
in ACM, ACM Cluster</p></header><div class=entry-body><p>Welcome to part 2 of my series of posts on building the ACM VM cluster!  <a href=/2012/09/08/building-acm-vm-cluster-part-1/>Part 1</a> covered the hardware and software that will be used in the cluster.  Part 2 is going to focus on network design.</p><h1 id=introduction>Introduction</h1><p>Typically in clusters there are two networks (usually represented by IP ranges, though sometimes actually physically separate): management and work.  Management is typically mostly for master node to worker node communication (giving and getting work orders), whereas work is for intercommunication between nodes.  However, in our case, we are going to need three separate networks: management, work and fiber.  Why?  Well, we have fiber cards in the nodes, which go faster then the ethernet cards that are in the nodes, and I&rsquo;d like to take advantage of that.</p><h1 id=physical-networks>Physical Networks</h1><p>As is probably obvious, we&rsquo;ll be using two distinctly different physical networks - the fiber network and the ethernet network.  Both the management and the work network will run over ethernet, while the …</p></div><a href=/2012/09/08/building-acm-vm-cluster-part-2-network-design/>Continue reading</a></article></div><div class=hentry><article itemtype=http://schema.org/Article itemscope id=blog/acm-cluster/building-acm-vm-cluster-part-1.md><header class=entry-header><h1 class=entry-title><a href=/2012/09/08/building-acm-vm-cluster-part-1/>Building the ACM VM Cluster, Part 1: Hardware</a></h1><p class=entry-info>Published on <time>Sat, Sep 8, 2012</time>
in ACM, ACM Cluster</p></header><div class=entry-body><p>So I have a vision for the ACM systems - I&rsquo;d like to make it so we are as redundant as possible and we can do updates to systems without having to take them offline.  The obvious answer to this is using VMs, in a cluster.  Fortunately, the ACM recently received a donation of the old <a href="http://center.ncet2.org/index.php?option=com_patents&controller=awards&tmpl=component&view=awards&layout=award&frame=awards&user=10274&id=86559_nsf">DLMS</a> cluster from physics (as well as three more recent Dell servers from JHU Housing and Dining).  This is the perfect opportunity for me!  So off we go, down the rabbit hole (again).</p><p>This post is going to focus on cluster design - first, a description of the hardware (since we didn&rsquo;t get to choose it, I wont be covering why this hardware), then a description of the software architecture and the whys of each software choice.</p><h1 id=hardware> Hardware</h1><h2 id=head-node-dell-poweredge-2950>Head Node (Dell PowerEdge 2950)</h2><p>4x Intel Xeon 5160 @ 3Ghz</p><p>4GB RAM</p><p>3x300GB SAS drives in hardware RAID5, approximately 600GB usable.</p><h2 id=cluster-nodes>Cluster Nodes</h2><p>2x AMD Opteron 244 @1.8GHz (Note: these have no hardware virtualization built in!)</p><p>RAM Varies, at least 2GB</p><p>40 GB IDE …</p></div><a href=/2012/09/08/building-acm-vm-cluster-part-1/>Continue reading</a></article></div><div class=pagination-container><nav><ul class=paginator><li class=page-item><a href=/categories/acm-cluster/ aria-label="First page" class=page-link role=button>&#171;</a></li><li class=page-item><a href=/categories/acm-cluster/ aria-label="Previous page" class=page-link role=button>&lt;</a></li><li class=page-item><a href=/categories/acm-cluster/ aria-label="Page 1" class=page-link role=button>1</a></li><li class="page-item page-link-current"><a href=/categories/acm-cluster/page/2/ aria-label="Page 2" class=page-link id=page-link-current role=button>2</a></li></ul></nav></div></main></div></div><div id=sidebar><div class=widget><nav><h1>Recent Posts</h1><ul class=entries-reent><li><a href=https://pressers.name/2022/02/01/enigma-2022/>Enigma 2022</a></li><li><a href=https://pressers.name/2021/11/21/getting-new-lenses-lensfun-notes/>Getting new lenses for Lensfun</a></li><li><a href=https://pressers.name/2021/10/04/living-germany-converting-drivers-license/>Living in Germany: Converting a Driver's License</a></li><li><a href=https://pressers.name/2021/02/08/im-moving-germany/>I'm moving to Germany!</a></li><li><a href=https://pressers.name/2021/01/23/i-finally-finished-kings-quest-6/>I Finally Finished King's Quest 6!</a></li></ul></nav></div><div class=sidebarbender></div><div class=widget><nav><h1>Social Media</h1><ul class=socialmedia><li><a href=https://twitter.com/spresser>Twitter</a></li><li><a href=https://www.linkedin.com/in/steven-presser/>LinkedIn</a></li></ul></nav></div><div class=sidebarbender></div><div class=widget><nav><h1>Categories</h1><ul class=categories><li><a href=https://pressers.name/categories/3d-printing/>3D Printing</a></li><li><a href=https://pressers.name/categories/acm/>ACM</a></li><li><a href=https://pressers.name/categories/acm-cluster/>ACM Cluster</a></li><li><a href=https://pressers.name/categories/cyberlaw/>Cyberlaw</a></li><li><a href=https://pressers.name/categories/cybersecurity/>Cybersecurity</a></li><li><a href=https://pressers.name/categories/germany/>Germany</a></li><li><a href=https://pressers.name/categories/infrastructure/>Infrastructure</a></li><li><a href=https://pressers.name/categories/life-in-germany/>Life in Germany</a></li><li><a href=https://pressers.name/categories/links/>Links</a></li><li><a href=https://pressers.name/categories/presentations/>Presentations</a></li><li><a href=https://pressers.name/categories/projects/>Projects</a></li><li><a href=https://pressers.name/categories/shrubbery/>Shrubbery</a></li></ul></nav></div><div class=sidebarbender></div></div></div><div id=onetracebottom><footer><a href=https://github.com/spresse1/pressers.name>Website source</a><br>Site design by Kyle M.</footer></div></div></body></html>